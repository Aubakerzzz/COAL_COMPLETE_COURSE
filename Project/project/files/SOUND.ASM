.MODEL SMALL
.STACK 100H

.DATA


.CODE



	MOV AH, 0H ; SETING VIDEO MODE 
	MOV AL, 13H ; 640 X 480- X 16 VGA
	INT 10H


	; BACKGROUND COLOR
	MOV AH, 06H 
	MOV AL, 0
	MOV BH, 0
	MOV BL, 0
	MOV CX,0
	MOV DH,50
	MOV DL,50
	INT 10H
	


;PLAY SOUND WHEN BALL COLLIDE WITH THE BRICKS 
PLAYSOUND PROC USES AX BX DX CX
	MOV	DX,10000	; NUMBER OF TIMES TO REPEAT WHOLE ROUTINE.

	MOV	BX,1		; FREQUENCY VALUE.
	MOV	AL, 10110110B	; THE MAGIC NUMBER (USE THIS BINARY NUMBER ONLY)
	OUT     43H, AL          ; SEND IT TO THE INITIALIZING PORT 43H TIMER 2.
	NEXT_FREQUENCY:          ; THIS IS WERE WE WILL JUMP BACK TO 2000 TIMES.
	MOV     AX, BX           ; MOVE OUR FREQUENCY VALUE INTO AX.
	OUT     42H, AL          ; SEND LSB TO PORT 42H.
	MOV     AL, AH           ; MOVE MSB INTO AL  
	OUT     42H, AL          ; SEND MSB TO PORT 42H.
	IN      AL, 61H          ; GET CURRENT VALUE OF PORT 61H.
	OR      AL, 00000011B    ; OR AL TO THIS VALUE, FORCING FIRST TWO BITS HIGH.
	OUT     61H, AL          ; COPY IT TO PORT 61H OF THE PPI CHIP
							; TO TURN ON THE SPEAKER.
	MOV     CX, 100          ; REPEAT LOOP 100 TIMES
	DELAY_LOOP:              ; HERE IS WHERE WE LOOP BACK TOO.
	LOOP    DELAY_LOOP       ; JUMP REPEATEDLY TO DELAY_LOOP UNTIL CX = 0
	INC     BX               ; INCREMENTING THE VALUE OF BX LOWERS 
							; THE FREQUENCY EACH TIME WE REPEAT THE
							; WHOLE ROUTINE
	DEC     DX               ; DECREMENT REPEAT ROUTINE COUNT
	CMP     DX, 0       
	; IS DX (REPEAT COUNT) = TO 0
	JNZ     NEXT_FREQUENCY   ; IF NOT JUMP TO NEXT_FREQUENCY
							; AND DO WHOLE ROUTINE AGAIN.
							; ELSE DX = 0 TIME TO TURN SPEAKER OFF
	IN      AL,61H           ; GET CURRENT VALUE OF PORT 61H.
	AND	AL,11111100B	; AND AL TO THIS VALUE, FORCING FIRST TWO BITS LOW.
	OUT     61H,AL           ; COPY IT TO PORT 61H OF THE PPI CHIP
	JMP EXIT						; TO TURN OFF THE SPEAKER.
	RET 	
PLAYSOUND ENDP

	
	CALL PLAYSOUND


EXIT::
	MOV AH, 04CH
	INT 21H
	END