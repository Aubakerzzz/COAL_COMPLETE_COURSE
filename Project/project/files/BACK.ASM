.MODEL SMALL
.STACK 100H

.DATA

	_COUNTER DB 0
	_XSTART DW 0
	_YSTART DW 0
	_XEND DW 40
	_YEND DW 15
	TEMP1 DB 0
	

.CODE
	
	MOV AX, @DATA
	MOV DS, AX
	MOV AX, 0
			
	MOV AH, 0H ; SETING VIDEO MODE 
	MOV AL, 13H ; 640 X 480- X 16 VGA
	INT 10H

	; BACKGROUND COLOR
	MOV AH, 06H 
	MOV AL, 0
	MOV BH, 07
	MOV BL, 0
	MOV CX,0
	MOV DH,50
	MOV DL,50
	INT 10H
	
	
	MAKEBOXES MACRO _XSTART, _YSTART, _XEND, _YEND, _COLOUR
		MOV CX, _XSTART
		.WHILE CX < _XEND
			MOV DX, _YSTART
			.WHILE DX < _YEND
				MOV AH, 0CH
				MOV AL, _COLOUR
				INT 10H
				INC DX
			.ENDW
			INC CX
		.ENDW
	ENDM
	BACK MACRO _COUNTER,_YSTART,_YEND,_XSTART,_XEND
		
		.WHILE ( _COUNTER < 7 )
			MAKEBOXES _XSTART,_YSTART,_XEND,_YEND,8
			MOV AX,_XEND
			MOV _XSTART,AX
			ADD _XSTART,7
			MOV AX, 0
			MOV AX, _XSTART
			MOV _XEND, AX
			ADD _XEND,40
			INC _COUNTER
		.ENDW
	ENDM
JMP START
	UPDATE PROC
		MOV _COUNTER, 0
		ADD _YSTART, 22
		ADD _YEND, 22
		MOV _XSTART, 0
		MOV _XEND, 40
		RET
	UPDATE ENDP
		
START::
	.WHILE( TEMP1 < 9 )
		.IF (TEMP1 == 8)
			ADD _YEND, 8
			ADD _YSTART,3
			BACK _COUNTER, _YSTART, _YEND, _XSTART, _XEND
		.ELSE
			BACK _COUNTER, _YSTART, _YEND, _XSTART, _XEND
			CALL UPDATE
		.ENDIF
			INC TEMP1			
	.ENDW
	
	
	

EXIT::
	MOV AH, 04CH
	INT 21H
	END
	